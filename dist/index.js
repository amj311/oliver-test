"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.expect = exports.test = exports.runTestDir = void 0;
var ASCII_LOGO = "\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2588\u2588\u2557\n\u2588\u2588\u2551...........................................................\u2588\u2588\u2551\n\u2588\u2588\u2551....\u2588\u2588\u2588\u2588\u2588\u2588\u2557.\u2588\u2588\u2557.....\u2588\u2588\u2557\u2588\u2588\u2557...\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2557............\u2588\u2588\u2551\n\u2588\u2588\u2551...\u2588\u2588\u2554\u2550\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2551.....\u2588\u2588\u2551\u2588\u2588\u2551...\u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557...........\u2588\u2588\u2551\n\u2588\u2588\u2551...\u2588\u2588\u2551...\u2588\u2588\u2551\u2588\u2588\u2551.....\u2588\u2588\u2551\u2588\u2588\u2551...\u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2557..\u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255D...........\u2588\u2588\u2551\n\u2588\u2588\u2551...\u2588\u2588\u2551...\u2588\u2588\u2551\u2588\u2588\u2551.....\u2588\u2588\u2551\u255A\u2588\u2588\u2557.\u2588\u2588\u2554\u255D\u2588\u2588\u2554\u2550\u2550\u255D..\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557...........\u2588\u2588\u2551\n\u2588\u2588\u2551...\u255A\u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255D\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2551.\u255A\u2588\u2588\u2588\u2588\u2554\u255D.\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2551..\u2588\u2588\u2551...........\u2588\u2588\u2551\n\u2588\u2588\u2551....\u255A\u2550\u2550\u2550\u2550\u2550\u255D.\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u255D\u255A\u2550\u255D..\u255A\u2550\u2550\u2550\u255D..\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u255D\u255A\u2550\u255D..\u255A\u2550\u255D...........\u2588\u2588\u2551\n\u2588\u2588\u2551...........................................................\u2588\u2588\u2551\n\u2588\u2588\u2551.......................\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557..\u2588\u2588\u2551\n\u2588\u2588\u2551.......................\u255A\u2550\u2550\u2588\u2588\u2554\u2550\u2550\u255D\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D\u255A\u2550\u2550\u2588\u2588\u2554\u2550\u2550\u255D..\u2588\u2588\u2551\n\u2588\u2588\u2551..........................\u2588\u2588\u2551...\u2588\u2588\u2588\u2588\u2588\u2557..\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557...\u2588\u2588\u2551.....\u2588\u2588\u2551\n\u2588\u2588\u2551..........................\u2588\u2588\u2551...\u2588\u2588\u2554\u2550\u2550\u255D..\u255A\u2550\u2550\u2550\u2550\u2588\u2588\u2551...\u2588\u2588\u2551.....\u2588\u2588\u2551\n\u2588\u2588\u2551..........................\u2588\u2588\u2551...\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551...\u2588\u2588\u2551.....\u2588\u2588\u2551\n\u2588\u2588\u2551..........................\u255A\u2550\u255D...\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u255D\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u255D...\u255A\u2550\u255D.....\u2588\u2588\u2551\n\u2588\u2588\u2551...........................................................\u2588\u2588\u2551\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551\n  \u255A\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255D                                                         \n";
var child_process_1 = __importDefault(require("child_process"));
var colors_1 = __importDefault(require("colors"));
var Assertions_1 = require("./Assertions");
var DriverUtils_1 = require("./DriverUtils");
var TestUtils_1 = require("./TestUtils");
var TSC_OUT_DIR = ".ot-tsc-tmp";
function runTestDir(testDir) {
    console.log(colors_1.default.green(ASCII_LOGO));
    var rawFiles = DriverUtils_1.getFilesFromDir(testDir, ".test.");
    var runner = new DriverUtils_1.TestFilesRunner();
    var compiler = new DriverUtils_1.TestFilesCompiler();
    function runTests(testFiles) {
        runner.runFiles(testFiles, function () {
            child_process_1.default.exec('rm -rf ' + TSC_OUT_DIR);
        });
    }
    compiler.compileFiles(rawFiles, TSC_OUT_DIR, runTests);
}
exports.runTestDir = runTestDir;
exports.test = TestUtils_1.oTest;
exports.expect = Assertions_1.expect;
